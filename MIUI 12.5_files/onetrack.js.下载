!function(n,e){function t(n,e){var t,r=rn.prototype.hasOwnProperty;for(t in n)r.call(n,t)&&e(t,n[t])}function r(n){return"object"==typeof n&&null!==n&&n.constructor===rn}function o(n,i,c){return t(i,function(t,i){c&&r(i)?(r(n[t])||(n[t]={}),o(n[t],i,c)):c&&i instanceof tn?(n[t]instanceof tn||(n[t]=[]),o(n[t],i,c)):i!==e&&(n[t]=i)}),n}function i(n,r){return t(r,function(t,r){n[t]===e&&(n[t]=r)}),n}function c(n){return $(n.replace(/\+/g," "))}function u(n,r){var o,i="";return t(n,function(n,t){if(t!=e)if(t instanceof tn)for(o=0;o<t.length;o++)i+="&"+Z(n)+"="+Z(t[o]);else i+="&"+Z(n)+"="+Z(t)}),r!=e?(r+i).replace(/[&?]{1,2}/,"?"):i.substr(1)}function a(n,e){var t,r="";for(t=0;t<e;t++)r+=n[un.floor(un.random()*n.length)];return r}function f(n,e){var t=tn.prototype;return t[n].apply(e[0],t.slice.call(e,1))}function s(){return f("slice",arguments)}function p(){return"prerender"==K.visibilityState}function l(n){n=n||{};var e,t,r,o,i={},u=K.cookie.split("; ");for(e=0;e<u.length;e++)u[e]&&(t=u[e].split("="),r=t.shift(),o=t.join("="),'"'==o[0]&&(o=o.slice(1,-1)),i[c(r)]=n.raw?o:c(o));return i}function g(n,e,r){var i=Z(n)+"="+Z(e);return r=o({path:"/"},r),r.expires&&(r.expires=r.expires.toUTCString()),t(r,function(n){var e=r[n];e&&(i+="; "+n,!0!==e&&(i+="="+e))}),K.cookie=i}function d(n,e){e=o({expires:new on(on.now()-1)},e),g(n,"",e)}function _(n,e){return n+un.floor((e-n+1)*un.random())}function v(){var n,e,t,r=[];for(n=0;n<256;n++){for(t=n,e=0;e<8;e++)t=1&t?3988292384^t>>>1:t>>>1;r[n]=t}return r}function h(n){var e,t="string"==typeof n,r=q||(q=v()),o=-1;for(t&&(n=pn(Z(n))),e=0;e<n.length;e++)o=o>>>8^r[255&(o^(t?n.charCodeAt(e):n[e]))];return((-1^o)>>>0).toString(16)}function m(n){return nn?nn.getItem(n):l()[n]}function w(n,e){nn?nn.setItem(n,e):g(n,e,{expire:new on(+new on+31536e7)})}function k(n){nn?nn.removeItem(n):d(n)}function y(n){return en?en.getItem(n):l()[n]}function b(n,e){en?en.setItem(n,e):g(n,e)}function I(n){ln.push(n),G||(G=Y(B)),nn&&nn.getItem("_onetrack_debug")&&W.log("onetrack",n)}function B(){var n,e;for(G=0,n=0,e=un.ceil(ln.length/gn);n<e;n++)S(ln.slice(n*gn,(n+1)*gn));ln.length=0}function S(e){if(N){var t,r,o,i=n.Blob,c=n.Uint8Array;if(V.sendBeacon&&sn&&i)r=an.stringify(e),t=new sn,C(r).then(function(n){t.append("p",new i([n]),"p"),t.append("gzip",1),t.append("sign",h(new c(n))),V.sendBeacon(N+"_a",t)},function(){t.append("p",new i([r]),"p"),t.append("sign",h(r)),V.sendBeacon(N+"_a",t)});else for(o=0;o<e.length;o++)x(e[o])}}function C(e){var t=n.Promise,r=n.CompressionStream,o=n.Response,i=n.Blob,c="function"==typeof r;return new t(function(n,t){if(!c)return t();new o(new i([e]).stream().pipeThrough(new r("gzip"))).arrayBuffer().then(function(e){n(e)})})}function x(n){var e=new fn,r={_:_(0,2147483647)};n=n||{},t(n.H,function(n,e){r["H."+n]=e}),t(n.B,function(n,e){r["B."+n]=e}),e.onload=e.onerror=function(){e.onload=e.onerror=null},r=u(r),e.src=N+"?"+r+"&sign="+h(r)}function L(n){var t=dn[n];t&&t.apply(e,s(arguments,1))}function T(n,t,i,c){r(t)&&(i=t.region,c=t.instanceId,t=t.channel),r(c)&&(c="cookie"===c.type&&c.name?F(c.name,c.options):e),o(bn,{app_id:n,channel:t||"default",instance_id:c||e,region:i}),N=D(i)}function j(n,e){r(n)?o(In,n):In[n]=e}function z(n,e){if(n&&bn.app_id){r(e)||(e={});var t={event:n};i(t,bn),i(e,In),I({H:P(t),B:P(e)})}}function O(n){z("view",n)}function U(n,e,t,r){H(n,e),r||z("ot_login",t)}function A(n){z("ot_logout",n),H(e,e)}function H(n,t){n!=e?w(wn,n):k(wn),t!=e?w(kn,t):k(kn)}function P(n){var e={};return t(n,function(n,t){e[n]=R(n,t)}),e}function R(n,t){if(t instanceof cn)try{return t(n)}catch(r){return e}return t}function D(n){var e=_n.cn;return n&&n.toLowerCase&&(n=n.toLowerCase(),e=_n[n]||_n._),"https://"+e+"/track/v4/js"}function E(){var n,e=l()[hn];return e&&(n=e.slice(3),d(hn)),n}function F(n,e){var t=l()[n];return t||(t=a(vn,32),g(n,t,o({expires:new on(+new on+31536e7)},e))),t}function J(){var n=+new on,e=y("_onetrack_sid"),t=X(m("_onetrack_st"),10);return(!e||!t||t<n-18e5)&&(e=a(vn,32),b("_onetrack_sid",e)),w("_onetrack_st",n),e}function M(){var t,r=n.onetrack;if(n.onetrack=L,(r=r&&r.q)instanceof tn)for(t=0;t<r.length;t++)try{L.apply(e,r[t])}catch(o){}}var q,G,N,K=n.document,Q=n.location,V=n.navigator,W=n.console,X=n.parseInt,Y=n.setTimeout,Z=n.encodeURIComponent,$=n.decodeURIComponent,nn=n.localStorage,en=n.sessionStorage,tn=n.Array,rn=n.Object,on=n.Date,cn=n.Function,un=n.Math,an=n.JSON,fn=n.Image,sn=n.FormData,pn=n.unescape,ln=[],gn=20,dn={init:T,set:j,track:z,trackPage:O,login:U,logout:A},_n={cn:"tracking.miui.com","in":"tracking.india.miui.com",ru:"tracking.rus.miui.com",_:"tracking.intl.miui.com"},vn="0123456789abcdef",hn="_onetrack",mn="_onetrack_cid",wn="_onetrack_uid",kn="_onetrack_uid_type",yn=function(){return!m(mn)}(),bn={instance_id:function(){var n=m(mn);return n||(n=E()||a(vn,32),w(mn,n)),n}(),session_id:function(){return J()},uid:function(){return m(wn)||e},uid_type:function(){return m(kn)||e},sdk_ver:"1.0.0",e_ts:function(){return+new on},tz:function(){var n=(new on).getTimezoneOffset(),e=un.abs(n);return"GMT"+(n>0?"-":"+")+("00"+un.floor(e/60)).slice(-2)+":"+("00"+e%60).slice(-2)}(),platform:"JS",ot_test_env:m("_onetrack_test")?1:e},In={referrer:K.referrer,location:function(){return Q.href},page:function(){return Q.pathname},title:function(){return K.title},encoding:K.characterSet||K.charset,language:(V.language||V.browserLanguage||"").toLowerCase(),screen_width:n.screen&&n.screen.width,screen_height:n.screen&&n.screen.height,first_open:yn?1:0};!function(n){function e(){p()||(K.removeEventListener("visibilitychange",e),n())}p()?K.addEventListener("visibilitychange",e):n()}(M)}(window);